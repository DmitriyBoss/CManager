# Поток событий  

# Содержание
1. [Актёры](#actors)  
2. [Варианты использования](#usecase)  
2.1. [Просмотр содержимого текущей директории](#view_current)  
2.2. [Выбор файла](#choose_file)  
2.3. [Выбор директории](#choose_dir)  
2.4. [Открытие файла](#open_file)  
2.5. [Открытие директории](#open_dir)  
2.6. [Перемещение между физическими разделами ](#change_disk)  
2.7. [Скопировать файл](#copy_file)  
2.8. [Скопировать директорию](#copy_dir)  
2.9. [Вставить файл](#paste_file)  
2.10. [Вставить директорию](#paste_dir)  
2.11. [Удалить файл](#delte_file)  
2.12. [Удалить директорию](#delete_dir)  
2.13. [Вырезать файл](#cut_file)  
2.14. [Вырезать директорию](#cut_dir)  
2.15. [Зашифровать файл](#crypt_file)  
2.16. [Защифровать директорию](#crypt_dir)  
2.17. [Дешифровать файл](#decrypt_file)  
2.18. [Дешифровать директорию](#decrypt_dir)
3. [Диаграмма вариантов использования](#usecase_diagram)

## <a name="actors"></a> 1. Актёры  
| Актёр | Описание |
|--|--|
| Пользователь | Человек, пользующийся программой в данный момент времени |
## <a name="usecase"></a> 2. Варианты использования  

### <a name="view_current_dir"></a> 2.1. Просмотр содержимого текущей директории  
Описание.  
Вариант использования "Просмотр содержимого текущей директории" позволяет пользователю просмотреть файлы и директории, содержащиеся в открытой ранее или открытой при загрузке приложения директории.  
Основной поток.
1. Вариант использования начинается, когда приложение запутилось или пользователь открыл какую-либо директорию.
2. Если у пользователя нет доступа к директории, то выполняется альтернативный поток А1.
3. Приложение считывает содержащиеся в выбранной директории объекты: файлы и директории.
4. Приложение отображает список объектов в панели обзора.
5. Вариант использования завершается.

Альтернативный поток А1.
1. Приложении сообщает пользователю об ошибке доступа к данной директории.
2. Возвращение к пункту 5 основного потока.

### <a name="choose_file"></a> 2.2. Выбор файла  
Описание.  
Вариант использования "Выбор файла" позволяет пользователю сделать активным выделение выбранного им файла.  

Основной поток.  
1. Вариант использования начинается, когда пользователь нажимает левой или правой клавишей мыши по одному из представленных в списке файлов.
2. Если объект с активным выделением отсутствует, то переход к пункту 4 основного потока.
3. Приложение снимает выделение с выбранного ранее объекта.
4. Приложение устанавливает активное состояние выделения  выбранного файла.
5. Вариант использования завершается.


### <a name="choose_dir"></a> 2.3. Выбор директории  
Описание.  
Вариант использования "Выбор директории" позволяет пользователю сделать активным выделение выбранной им директории.  

Основной поток.  
1. Вариант использования начинается, когда пользователь нажимает левой или правой клавишей мыши по одной из представленных в списке директорий.
2. Если объект с активным выделением отсутствует, то переход к пункту 4 основного потока.
3. Приложение снимает выделение с выбранного ранее объекта.
4. Приложение устанавливает активное состояние выделения  выбранной директории.
5. Вариант использования завершается.

### <a name="open_file"></a> 2.4. Открытие файла  
Описание.  
Вариант использования "Открытие файла " позволяет пользователю открыть файл с помощью ассоциированного с этим типом файлов приложения Windows.  

Основной поток.  
1. Вариант использования начинается, когда пользователь дважды нажимает левой клавишей мыши по файлу или при нажатии клавиши Enter, когда файл выделен.
2. Если у пользователя нет доступа к файлу, то выполняется альтернативный поток А1.
3. Приложение инициирует операцию открытия операционной системой, передавая файл как аргумент.
4. Вариант использования завершается.

Альтернативный поток А1.
1. Приложение сообщает пользователю об ошибке доступа к файлу.
2. Вариант использования завершается.

### <a name="open_dir"></a> 2.5. Открытие директории  
Описание.  
Вариант использования "Открытие директории " позволяет пользователю просмотреть содержимое выбранной им директории.  

Основной поток.  
1. Вариант использования начинается, когда пользователь дважды нажимает левой клавишей мыши по директории или при нажатии клавиши Enter, когда директория выделена.
2. Если у пользователя нет доступа к директории, то выполняется альтернативный поток А1.
3. Приложение считывает содержащиеся в выбранной директории объекты: файлы и директории.
4. Приложение отображает отсортированный список объектов в панели обзора.
5. Вариант использования завершается.

Альтернативный поток А1.
1. Приложение сообщает пользователю об ошибке доступа к директории.
2. Вариант использования завершается.

### <a name="change_disk"></a> 2.6. Перемещение между физическими разделами   
Описание.  
Вариант использования "Перемещение между физическими разделами" позволяет пользователю перейти к работе с другими физическими разделами устройства хранения информации.  

Основной поток.
1. Вариант использования начинается, когда пользователь нажимает одну из соответствующих кнопок, расположенных над панелью обзора.
2. Текущее расположение в файловой системе меняется на то, с которым ассоциирована кнопка.
3. Приложение считывает содержимое по новому расположению.
4. Содержимое сортируется по выставленным пользователем параметрам.
5. Содержимое выводится в панель обзора.
6. Вариант использования завершается.

### <a name="copy_file"></a> 2.7. Скопировать файл  
Описание.  
Вариант использования "Скопировать файл" позволяет пользователю пометить выбранный файл для дальшейшего его дублирования.  

Основной поток.
1. Вариант использования начинается, когда пользователь выбирает пункт "Скопировать" контекстного меню файла или нажимает сочетание клавиш Ctrl+C при выделеном файле.
2. Программа сохраняет в памяти расположение выбранного файла.
3. Вариант использования завершается.

### <a name="copy_dir"></a> 2.8. Скопировать директорию  
Описание.  
Вариант использования "Скопировать директорию " позволяет пользователю пометить выбранную директорию для дальнейшего её дублирования.  

Основной поток.
1. Вариант использования начинается, когда пользователь выбирает пункт "Скопировать" контекстного меню директории или нажимает сочетание клавиш Ctrl+C при выделеной директории.
2. Программа сохраняет в памяти расположение выбранной директории.
3. Вариант использования завершается.

### <a name="paste_file"></a> 2.9. Вставить файл  
Описание.  
Вариант использования "Вставить файл" позволяет пользователю переместить вырезанный ранее файл или продублировать скопированный.  

Основной поток.
1. Вариант использования начинается, когда пользователь выбирает пункт "Вставить" контекстного меню файла или нажимает сочетание клавиш Ctrl+V.
2. Программа копирует данные по сохранённому при копировании или вырезке пути в текущую директорию.
3. Если вставка происходит после операции вырезки, то выполняется альтернативный поток А1.
4. Приложение обновляет список файлов и директорий, хранящихся в текущей директории.
5. Вариант использования завершается.

Альтернативный поток А1.
1. Приложение производит операцию удаления файла из первоначального расположения (сохранённого при совершении операции "Вырезать").
2. Возвращение к пункту 4 основного потока.

### <a name="paste_dir"></a> 2.10. Вставить директорию  
Описание.  
Вариант использования "Вставит директорию" позволяет пользователю переместить вырезанную ранее директорию или продублировать скопированную.  

Основной поток.
1. Программа производит рекурсивный обход содержимого выбранной папки.
2. Программа формирует идиентичные пути расположения файлов для сохранения первоначальной структуры каталога.
3. Программа копирует файлы по соответствующим формируемым адресам.
4. Если вставка происходит после операции вырезки, то выполняется альтернативный поток А1.
5. Приложение обновляет список файлов и директорий, хранящихся в текущей директории.
6. Вариант использования завершается.

Альтернативный поток А1.
1. Приложение производит операцию удаления директории из первоначального расположения (сохранённого при совершении операции "Вырезать").
2. Возвращение к пункту 5 основного потока.

### <a name="delte_file"></a> 2.11. Удалить файл  
Описание.  
Вариант использования "Удалить файл" позволяет пользователю безвозвратно удалить файл из файловой системы. Однако это удаление НЕ гарантирует полное уничтожение данных об объекте с устройства хранения.  

Основной поток.
1. Вариант использования начинается, когда пользователь выбирает пункт "Удалить" контекстного меню файла или нажимает клавишу "Delete" при выделеном файле.
2. Приложение отображает окно подтверждения операции.
3. Ожидание выбора пользователя.
4. Окно подтверждения закрывается.
5. Если оперция была отменена, то переход к пункту 8 основного потока.
6. Приложение удаляет выбранный файл.
7. Приложения обновляет список файлов и директорий текущей директории.
8. Вариант использования завершается.

### <a name="delete_dir"></a> 2.12. Удалить директорию  
Описание.  
Вариант использования "Удалить директорию" позволяет пользователю безвозвратно удалить директорию и её содержимое из файловой системы. Однако это удаление НЕ гарантирует полное уничтожение данных об объектах с устройства хранения.  

Основной поток.
1. Вариант использования начинается, когда пользователь выбирает пункт "Удалить" контекстного меню директории или нажимает клавишу "Delete" при выделеной директории.
2. Приложение отображает окно подтверждения операции.
3. Ожидание выбора пользователя.
4. Окно подтверждения закрывается.
5. Если оперция была отменена, то переход к пункту 8 основного потока.
5. Приложение производит рекурсивный обход выбранной директории.
6. Удаляется каждый вложенный файл или директория.
7. Приложение обновляет список файлов и директорий текущей директории.
8. Вариант использования завершается.

### <a name="cut_file"></a> 2.13. Вырезать файл  
Описание.  
Вариант использования "Вырезать файл" позволяет пользователю пометить файл для дальнейшего перемещения данного файла.  

Основной поток.
1. Вариант использования начинается, когда пользователь выбирает пункт "Вырезать" контекстного меню файла или нажимает сочетание клавиш Ctrl+X при выделеном файле.
2. Программа сохраняет в памяти расположение выбранного файла.
3. Вариант использования завершается.

### <a name="cut_dir"></a> 2.14. Вырезать директорию  
Описание.  
Вариант использования "Вырезать директорию" позволяет пользователю позволяет пользователю пометить выбранную директорию для дальнейшего её перемещения.    

Основной поток.
1. Вариант использования начинается, когда пользователь выбирает пункт "Вырезать" контекстного меню директории или нажимает сочетание клавиш Ctrl+X при выделеной директории.
2. Программа сохраняет в памяти расположение выбранной директории.
3. Вариант использования завершается.

### <a name="crypt_file"></a> 2.15. Зашифровать файл  
Описание.  
Вариант использования "Зашифровать файл" позволяет пользователю, имеющему права на изменения файла, применить алгоритм шифрования данных к выбранному файлу.  

Основной поток.
1. Вариант использования начинается, когда пользователь выбирает пунк "Зашифровать" контекстного меню файла.
2. Если пользователь не обладает правами на изменение файла, то выполняется альтернативный поток А1.
3. Приложение использует возможности операционной системы Windows для шифрования файла и сохранения ключа дешифрации для текущего пользователя системы (текущей учётной записи пользователя Windows).
4. Если оперция шифрования завершилась неудачей, то выполняется альтернативный поток А2.
5. Приложение выводит сообщение об успешном выполнении шифрования.
6. Вариант использования завершается.

Альтернативный поток А1.
1. Приложение выводит сообщение об отсутствии необходимого уровня доступа к файлу.
2. Вариант использования завершается.

Альтернативный поток А2.
1. Приложение выводит сообщение о неудаче выполнения шифрования с кодом и текстом ошибки.
2. Вариант использования завершается.

### <a name="crypt_dir"></a> 2.16. Защифровать директорию  
Описание.  
Вариант использования "Зашифровать директорию" позволяет пользователю, имеющему права на изменения файла, применить алгоритм шифрования данных к выбранной директории.  

Основной поток.
1. Вариант использования начинается, когда пользователь выбирает пунк "Зашифровать" контекстного меню директории.
2. Если пользователь не обладает правами на изменение директории, то выполняется альтернативный поток А1.
3. Приложение использует возможности операционной системы Windows для шифрования директории и сохранения ключа дешифрации для текущего пользователя системы (текущей учётной записи пользователя Windows).
4. Если оперция шифрования завершилась неудачей, то выполняется альтернативный поток А2.
5. Приложение выводит сообщение об успешном выполнении шифрования.
6. Вариант использования завершается.

Альтернативный поток А1.
1. Приложение выводит сообщение об отсутствии необходимого уровня доступа к директории.
2. Вариант использования завершается.

Альтернативный поток А2.
1. Приложение выводит сообщение о неудаче выполнения шифрования с кодом и текстом ошибки.
2. Вариант использования завершается.

### <a name="decrypt_file"></a> 2.17. Дешифровать файл  
Описание.  
Вариант использования "Дешифровать файл" позволяет пользователю дешифровать зашифрованный им ранее файл с помощью ключа дешифрации, хранящегося для его учётной записи пользователя Windows.  

Основной поток.
1. Вариант использования начинается, когда пользователь выбирает пункт "Дешифровать" контекстного меню файла.
2. Если пользователь пытается дешифровать не принадлежащий ему файл, то выполняется альтернативный поток А1.
3. Приложение использует возможности ОС Windows для дешифрации файла с помощью ключа, принадлежащего текущему пользователю.
4. Если оперция дешифровки завершилась неудачей, то выполняется альтернативный поток А2.
4. Приложение выводит сообщение об успешном выполнении дешифрации.
5. Вариант использования завершается.

Альтернативный потом А1.
1. Приложение выводит сообщение об невозможности выполнения операции дешифрирования.
2. Переход к пункту 5 основного потока.

Альтернативный поток А2.
1. Приложение выводит сообщение о неудаче выполнения дешифрования с кодом и текстом ошибки.
2. Переход к пункту 5 основного потока.

### <a name="decrypt_dir"></a> 2.18. Дешифровать директорию  
Описание.  
Вариант использования "Дешифровать директорию" позволяет пользователю дешифровать зашифрованную им ранее директорию с помощью ключа дешифрации, хранящегося для его учётной записи пользователя Windows.  

Основной поток.
1. Вариант использования начинается, когда пользователь выбирает пункт "Дешифровать" контекстного меню директории.
2. Если пользователь пытается дешифровать не принадлежащую ему директорию, то выполняется альтернативный поток А1.
3. Приложение использует возможности ОС Windows для дешифрации директории с помощью ключа, принадлежащего текущему пользователю.
4. Если оперция дешифровки завершилась неудачей, то выполняется альтернативный поток А2.
4. Приложение выводит сообщение об успешном выполнении дешифрации.
5. Вариант использования завершается.

Альтернативный потом А1.
1. Приложение выводит сообщение об невозможности выполнения операции дешифрирования.
2. Переход к пункту 5 основного потока.

Альтернативный поток А2.
1. Приложение выводит сообщение о неудаче выполнения дешифрования с кодом и текстом ошибки.
2. Переход к пункту 5 основного потока.

## <a name="usecase_diagram"></a> Диаграмма вариантов использования
![UseCase](https://github.com/Egor-Ananko-650503/CManager/blob/master/docs/images/usecase/UseCase.jpg?raw=true)